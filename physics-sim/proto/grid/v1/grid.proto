syntax = "proto3";
package grid.v1;

// IMPORTANT: set go_package to match your module path
option go_package = "module/path/go/pkg/pb/grid/v1;gridv1";

message Clock { uint64 tick = 1; uint64 dt_ms = 2; }

message Envelope {
  string msg_id = 1;
  string src    = 2;
  string dest   = 3;
  uint64 seq    = 4;
  Clock  clock  = 5;
}

message SimStatus {
  Envelope env = 1;
  string state = 2; // RUNNING|PAUSED|UNKNOWN
}

message NodeDelta {
  Envelope env     = 1;
  string   node_id = 2;
  // Keep minimal; add fields later.
  optional double v_pu = 10;
}

message EdgeDelta {
  Envelope env     = 1;
  string   edge_id = 2;
  optional bool breaker_closed = 10;
}

message Command {
  Envelope env = 1;
  string comp_id = 2;
  string type    = 3;
  map<string,string> args = 4;
  uint64 apply_tick = 5;
}